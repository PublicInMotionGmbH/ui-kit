@import './config'

@include module('navigation')
  box-sizing: border-box
  display: inline-block
  position: relative

  /***** Common elements styles *****/
  #{$sel-nav-elem}
    cursor: pointer

  &__divider
    padding: $navigation-padding-vertical 0

  /***** Common styles for navigation type: breadcrumbs, navbar *****/
  &--navbar,
  &--breadcrumbs
    position: static

    // Parent elements styles
    &#{$sel-nav-parent}
      display: inline-flex
      justify-content: space-between
      padding: $navigation-padding-vertical 0
      border-radius: $navigation-element-border-radius

    // Navbar elements displayed inside dropdowns
    #{$sel-nav-elem}
      display: block
      position: relative
      margin: $navigation-padding-vertical 0
      user-select: none

    // Element button
    #{$sel-nav-elem-button}
      padding: $navigation-padding-vertical $navigation-padding-horizontal

    // Dropdown which will be shown after element is clicked
    #{$sel-nav-elem-menu}
      display: flex
      position: absolute
      flex-direction: column
      z-index: 999
      height: 0
      top: 0
      left: 100% // calc(100% + #{$navigation-padding-horizontal})
      overflow: hidden
      box-shadow: -3px 3px 6px rgba(0,0,0,0.16), -3px 3px 6px rgba(0,0,0,0.23)

    // Subtitle displayed at the top of each dropdown, specific for each.
    #{$sel-nav-subtitle}
      margin: $navigation-padding-vertical $navigation-padding-horizontal #{2 * $navigation-padding-vertical}
      font-size: $navigation-subtitle-font-size
      white-space: nowrap

    // Parent elements styles
    &#{$sel-nav-parent}
      // Set position of first navigation row
      > #{$sel-nav-elem}
        display: inline-block
        margin: 0 $navigation-padding-horizontal

        // Set position of first menu under navbar/breadcrumbs elements
        > #{$sel-nav-elem-menu}
          top: 100% // calc(100% + #{$navigation-padding-vertical})
          left: 0

  /***** Navigation type `navbar` and 'sidebar rules *****/
  &--navbar, &--sidebar
    &#{$sel-nav-parent}
      background-color: $navigation-background
      color: $navigation-text-color

    #{$sel-nav-elem-menu}
      background-color: $navigation-menu-background

    // Styles for active/open/hovered element
    #{$sel-nav-elem}
      font-weight: $navigation-element-font-weight

      &:hover, &--active, &--open
        background-color: $navigation-element-active-background

  &--navbar
    // Show dropdown menu when opened
    #{$sel-nav-elem}
      &--open
        > #{$sel-nav-elem-menu}
          height: initial
          padding: $navigation-padding-vertical $navigation-padding-horizontal
          overflow: visible

  /***** Navigation type `breadcrumbs` specific rules *****/
  &--breadcrumbs
    &#{$sel-nav-parent}
      background-color: transparent

    #{$sel-nav-elem-menu}
      background-color: $navigation-breadcrumbs-menu-background-color

    // Open navigation menu on hover
    #{$sel-nav-elem}
      &:hover
        > #{$sel-nav-elem-menu}
          height: initial
          padding: $navigation-padding-vertical $navigation-padding-horizontal
          overflow: visible

    // Styles for active/open/hovered element
    #{$sel-nav-elem-menu}
      #{$sel-nav-elem}
        &:hover, &--active, &--open
          background-color: $navigation-breadcrumbs-element-active-color



  /***** Navigation type `sidebar` specific rules *****/
  &--sidebar
    display: block
    height: 100%
    background: $sidebar-background-color
    box-shadow: $sidebar-box-shadow
    color: $navigation-text-color
    width: $sidebar-size

    #{$sel-nav-elem},
    #{$sel-nav-subtitle}
      padding: $navigation-element-padding-vertical $navigation-element-padding-horizontal
      border-bottom: 1px solid  $sidebar-button-border-color

    #{$sel-nav-elem-menu}
      position: relative
      position: absolute
      left: 100%
      top: 0
      width: 0
      height: 100%
      overflow: hidden
      box-shadow: -3px 0 6px rgba(0,0,0,0.16), -3px 0 6px rgba(0,0,0,0.23)

    & &
      background: $sidebar-nested-background

    & > #{$sel-nav-elem}
      > #{$sel-nav-elem-button}
        font-size: $sidebar-label-size
        height: $sidebar-element-height

    #{$sel-nav-elem}
      &--open
        > #{$sel-nav-elem-menu}
          width: $sidebar-size
          overflow: visible

    &#{$sel-nav}--panel
      background: $sidebar-panel-background
      color: $sidebar-panel-color
      box-shadow: $sidebar-box-shadow
      width: $sidebar-panel-width

      & > #{$sel-nav-elem}
        > #{$sel-nav-elem-button}
          font-weight: initial
          height: initial

        &--open >  #{$sel-nav-elem-button},
        &:hover > #{$sel-nav-elem-button}
          font-weight: $navigation-element-font-weight

  /***** Navigation type `tree` specific rules *****/
  &--tree
    #{$sel-nav-elem}
      padding: $navigation-padding-vertical $navigation-padding-horizontal

    #{$sel-nav-elem-menu}
      position: relative
      left: 3 * $navigation-tree-subtree-offset
      padding: $navigation-padding-vertical $navigation-padding-horizontal
      height: 0
      overflow: hidden

    #{$sel-nav-elem}
      &--open > #{$sel-nav-elem-menu}
        height: initial
        overflow: visible

  /***** Common rules for type `tabs` and `steps` *****/
  &--tabs, &--steps
    display: flex

    #{$sel-nav-elem}
      text-align: center

    #{$sel-nav-elem-menu}
      display: none

  /***** Navigation type `tabs` specific rules *****/
  &--tabs
    #{$sel-nav-elem}
      flex-grow: 1
      border: $navigation-tabs-border
      border-bottom: 0
      border-radius: $navigation-tabs-border-radius
      background-color: $navigation-tabs-element-background-color
      color: $navigation-tabs-element-text-color
      padding: $navigation-element-padding-vertical $navigation-element-padding-horizontal

    #{$sel-nav-elem}
      &:hover, &--active, &--open
        background-color: $navigation-tabs-element-active-background-color

  &--steps
    justify-content: space-between
@keyframes show-overflow
  0%, 100%
    overflow: hidden
